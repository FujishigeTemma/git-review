# Git Review

AI Agentãƒãƒ¼ãƒ ã¨ã®ã‚³ãƒŸãƒƒãƒˆãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿç¾ã™ã‚‹VSCodeæ‹¡å¼µã€‚

## Features

- **Inline Comments** â€” ã‚¬ã‚¿ãƒ¼ã® `+` ã‚¢ã‚¤ã‚³ãƒ³ã‹ã‚‰GitHub PRã®ã‚ˆã†ã«è¡Œ/ç¯„å›²ã‚’é¸æŠã—ã¦ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ 
- **Status Bar** â€” `Review 2/5 (3 ğŸ’¬)` å½¢å¼ã§é€²æ—è¡¨ç¤ºã€‚ã‚¯ãƒªãƒƒã‚¯ã§æ¬¡ã®ã‚³ãƒŸãƒƒãƒˆã¸
- **Context Menu** â€” ãƒ†ã‚­ã‚¹ãƒˆé¸æŠæ™‚ã«å³ã‚¯ãƒªãƒƒã‚¯ã§ `Add Comment on Selection`
- **Command Palette** â€” ãƒ¬ãƒ“ãƒ¥ãƒ¼é–‹å§‹ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ ãƒ»é€²è¡Œãƒ»ä¸­æ–­ãªã©ã®å…¨æ“ä½œ

## Commands

| Command                                | èª¬æ˜                                                                                                      | åˆ©ç”¨å¯èƒ½æ¡ä»¶               |
| -------------------------------------- | --------------------------------------------------------------------------------------------------------- | -------------------------- |
| `Git Review: Start Review`             | ãƒ¬ãƒ“ãƒ¥ãƒ¼é–‹å§‹ã€‚base refã‚’æŒ‡å®šï¼ˆç©ºæ¬„ã§main/master/developã‹ã‚‰è‡ªå‹•æ¤œå‡ºï¼‰                                     | ãƒ¬ãƒ“ãƒ¥ãƒ¼æœªé–‹å§‹æ™‚           |
| `Git Review: Next Commit`              | æ¬¡ã®ã‚³ãƒŸãƒƒãƒˆã¸é€²ã‚€ï¼ˆCLIãŒstaged changesã‚’è‡ªå‹•commitï¼‰ã€‚æœ€å¾Œã®ã‚³ãƒŸãƒƒãƒˆã®å ´åˆã¯è‡ªå‹•finishï¼‹å…ƒãƒ–ãƒ©ãƒ³ãƒã«å¾©å¸° | ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­                 |
| `Git Review: Add Comment`              | ç¾åœ¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»é¸æŠç¯„å›²ã«ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ                                                                     | ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­                 |
| `Git Review: Add Comment on Selection` | ãƒ†ã‚­ã‚¹ãƒˆé¸æŠç¯„å›²ã«ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰åˆ©ç”¨ï¼‰                                            | ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­ãƒ»ãƒ†ã‚­ã‚¹ãƒˆé¸æŠæ™‚ |
| `Git Review: Show All Comments`        | å…¨ã‚³ãƒ¡ãƒ³ãƒˆã‚’Markdownã§è¡¨ç¤º                                                                                | å¸¸æ™‚                       |
| `Git Review: Show Status`              | é€²æ—è¡¨ç¤ºï¼ˆãƒ¬ãƒ“ãƒ¥ãƒ¼æ¸ˆã¿ã‚³ãƒŸãƒƒãƒˆæ•°ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆæ•°ï¼‰                                                            | ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­                 |
| `Git Review: Abort Review`             | ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­æ–­ã€‚å…ƒã®ãƒ–ãƒ©ãƒ³ãƒã«æˆ»ã‚Šãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã‚’å‰Šé™¤                                                    | ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­                 |

## UI Elements

### Status Bar

ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼å·¦å´ã«é€²æ—ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

```
$(git-compare) Review 2/5 (3 ğŸ’¬)
```

- **è¡¨ç¤ºå†…å®¹**: ç¾åœ¨ã®ã‚³ãƒŸãƒƒãƒˆç•ªå· / ç·ã‚³ãƒŸãƒƒãƒˆæ•°ã€ã‚³ãƒ¡ãƒ³ãƒˆæ•°
- **ã‚¯ãƒªãƒƒã‚¯å‹•ä½œ**: `Next Commit` ã‚’å®Ÿè¡Œ
- **ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—**: ã‚³ãƒŸãƒƒãƒˆé€²æ—ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆæ•°ã®è©³ç´°

### Inline Comments

VSCode Comments APIã‚’ä½¿ç”¨ã—ãŸGitHub PRé¢¨ã®ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½ã€‚

- ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­ã€å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¬ã‚¿ãƒ¼ã« `+` ã‚¢ã‚¤ã‚³ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- ã‚¯ãƒªãƒƒã‚¯ã§ã‚³ãƒ¡ãƒ³ãƒˆå…¥åŠ›æ¬„ãŒé–‹ãã€è¡Œ/ç¯„å›²ã‚’æŒ‡å®šã—ã¦ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ 
- è¿½åŠ æ¸ˆã¿ã‚³ãƒ¡ãƒ³ãƒˆã¯ã‚¹ãƒ¬ãƒƒãƒ‰ã¨ã—ã¦è¡¨ç¤ºã•ã‚Œã‚‹
- ã‚³ãƒŸãƒƒãƒˆåˆ‡æ›¿æ™‚ã«è©²å½“ã‚³ãƒŸãƒƒãƒˆã®ã‚³ãƒ¡ãƒ³ãƒˆãŒè‡ªå‹•å¾©å…ƒã•ã‚Œã‚‹

### Context Menu

ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­ã€ã‚¨ãƒ‡ã‚£ã‚¿ã®å³ã‚¯ãƒªãƒƒã‚¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«ä»¥ä¸‹ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚

- **Add Comment on Selection** â€” ãƒ†ã‚­ã‚¹ãƒˆé¸æŠæ™‚ã®ã¿è¡¨ç¤º
- **Add Comment** â€” å¸¸æ™‚è¡¨ç¤ºï¼ˆãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­ï¼‰

### Comment Highlight

ã‚³ãƒ¡ãƒ³ãƒˆä»˜ãè¡Œã®èƒŒæ™¯è‰²ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™ã€‚

| ã‚«ãƒ©ãƒ¼ID                     | èª¬æ˜                           | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ (dark) | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ (light) |
| ---------------------------- | ------------------------------ | ----------------- | ------------------ |
| `gitReview.commentHighlight` | ã‚³ãƒ¡ãƒ³ãƒˆä»˜ãè¡Œã®èƒŒæ™¯ãƒã‚¤ãƒ©ã‚¤ãƒˆ | `#ffd70020`       | `#ffd70030`        |

è¨­å®šä¾‹ï¼ˆ`settings.json`ï¼‰:

```json
{
    "workbench.colorCustomizations": {
        "gitReview.commentHighlight": "#ff000030"
    }
}
```

## Architecture: CLI Delegation

ã“ã®æ‹¡å¼µã¯Goè£½CLIãƒ„ãƒ¼ãƒ« `git review` ã‚’ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨ã—ã¦ä½¿ç”¨ã—ã¾ã™ã€‚ãƒ¬ãƒ“ãƒ¥ãƒ¼æ“ä½œï¼ˆstart/next/finish/abortï¼‰ã¯ã™ã¹ã¦ `git review <cmd>` ã«å§”è­²ã—ã€æ‹¡å¼µã¯UIè¡¨ç¤ºã¨ã‚³ãƒ¡ãƒ³ãƒˆç®¡ç†ã‚’æ‹…å½“ã—ã¾ã™ã€‚

```
VSCode Extension                    git review CLI
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Command Palette  â”‚â”€â”€startâ”€â”€â”€â”€â”€â”€â†’â”‚ git review start  â”‚
â”‚ Status Bar       â”‚â”€â”€nextâ”€â”€â”€â”€â”€â”€â”€â†’â”‚ git review next   â”‚
â”‚ Inline Comments  â”‚â”€â”€finishâ”€â”€â”€â”€â”€â†’â”‚ git review finish â”‚
â”‚                  â”‚â”€â”€abortâ”€â”€â”€â”€â”€â”€â†’â”‚ git review abort  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                  â”‚
         â”‚  UI state read                   â”‚  git ops
         â–¼                                  â–¼
    .git/review/                   cherry-pick, notes,
    (shared state)                 branch management
```

CLIã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«:

```bash
go install github.com/FujishigeTemma/git-review@latest
```

## Development

```bash
cd vscode-extension
pnpm install

pnpm run dev             # watch modeï¼ˆé–‹ç™ºç”¨ãƒ“ãƒ«ãƒ‰ï¼‰
pnpm run build           # production build
pnpm run test            # vitest
pnpm run lint            # oxlint
pnpm run format          # oxfmt
pnpm run check           # lint + format + testï¼ˆå…¨ãƒã‚§ãƒƒã‚¯ï¼‰
pnpm run package         # .vsixãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½œæˆ
```

F5ã§ Extension Development Host ã‚’èµ·å‹•ã—ã€ãƒ†ã‚¹ãƒˆç”¨ãƒªãƒã‚¸ãƒˆãƒªã‚’é–‹ã„ã¦Command Paletteã‹ã‚‰æ“ä½œã§ãã¾ã™ã€‚

## Requirements

- VSCode ^1.85.0
- Git
- `git review` CLI (`go install github.com/FujishigeTemma/git-review@latest`)

## License

MIT
